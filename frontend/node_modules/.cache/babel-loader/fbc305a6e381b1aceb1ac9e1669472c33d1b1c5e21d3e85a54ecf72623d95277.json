{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bhash\\\\OneDrive\\\\Desktop\\\\movievercelsssss\\\\frontend\\\\src\\\\components\\\\Register.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useAuth } from '../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Register = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState('customer'); // State for user role\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false); // State for loading\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(''); // Reset error message\n    setLoading(true); // Set loading to true\n    try {\n      // Send registration data to the backend\n      const response = await axios.post('http://localhost:5000/register', {\n        username,\n        password,\n        role\n      });\n      // If registration is successful, log the user in\n      login(response.data);\n      navigate('/login'); // Redirect to the login page after successful registration\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setError(\"Error registering user: \" + (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Unknown error\"));\n      console.error(\"Error registering user:\", error);\n    } finally {\n      setLoading(false); // Reset loading state\n    }\n  };\n  const isPasswordStrong = password => {\n    const hasUpperCase = /[A-Z]/.test(password);\n    const hasLowerCase = /[a-z]/.test(password);\n    const hasNumbers = /\\d/.test(password);\n    const hasSpecialChars = /[!@#$%^&*]/.test(password);\n    return password.length >= 6 && hasUpperCase && hasLowerCase && hasNumbers && hasSpecialChars;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-center mb-4\",\n      children: \"Register\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700\",\n          children: \"Role\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: role,\n          onChange: e => setRole(e.target.value),\n          className: \"border border-gray-300 rounded w-full p-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"customer\",\n            children: \"Customer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"admin\",\n            children: \"Admin\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          className: \"border border-gray-300 rounded w-full p-2\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          className: \"border border-gray-300 rounded w-full p-2\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this), !isPasswordStrong(password) && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500\",\n          children: \"Password must be at least 6 characters long and include uppercase letters, numbers, and special characters.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 53\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\",\n        disabled: loading,\n        children: loading ? 'Registering...' : 'Register'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n_s(Register, \"6aSRADIt5joRUwodNPrxCqhAsYw=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","useAuth","useNavigate","axios","jsxDEV","_jsxDEV","Register","_s","username","setUsername","password","setPassword","role","setRole","error","setError","loading","setLoading","login","navigate","handleSubmit","e","preventDefault","response","post","data","_error$response","_error$response$data","message","console","isPasswordStrong","hasUpperCase","test","hasLowerCase","hasNumbers","hasSpecialChars","length","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","type","required","disabled","_c","$RefreshReg$"],"sources":["C:/Users/bhash/OneDrive/Desktop/movievercelsssss/frontend/src/components/Register.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst Register = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [role, setRole] = useState('customer'); // State for user role\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false); // State for loading\r\n    const { login } = useAuth();\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError(''); // Reset error message\r\n        setLoading(true); // Set loading to true\r\n        try {\r\n            // Send registration data to the backend\r\n            const response = await axios.post('http://localhost:5000/register', { username, password, role });\r\n            // If registration is successful, log the user in\r\n            login(response.data);\r\n            navigate('/login'); // Redirect to the login page after successful registration\r\n        } catch (error) {\r\n            setError(\"Error registering user: \" + (error.response?.data?.message || \"Unknown error\"));\r\n            console.error(\"Error registering user:\", error);\r\n        } finally {\r\n            setLoading(false); // Reset loading state\r\n        }\r\n    };\r\n\r\n    const isPasswordStrong = (password) => {\r\n        const hasUpperCase = /[A-Z]/.test(password);\r\n        const hasLowerCase = /[a-z]/.test(password);\r\n        const hasNumbers = /\\d/.test(password);\r\n        const hasSpecialChars = /[!@#$%^&*]/.test(password);\r\n        return password.length >= 6 && hasUpperCase && hasLowerCase && hasNumbers && hasSpecialChars;\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-md mx-auto p-4\">\r\n            <h2 className=\"text-2xl font-bold text-center mb-4\">Register</h2>\r\n            {error && <p className=\"text-red-500\">{error}</p>}\r\n            <form onSubmit={handleSubmit} className=\"bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4\">\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-gray-700\">Role</label>\r\n                    <select\r\n                        value={role}\r\n                        onChange={(e) => setRole(e.target.value)}\r\n                        className=\"border border-gray-300 rounded w-full p-2\"\r\n                    >\r\n                        <option value=\"customer\">Customer</option>\r\n                        <option value=\"admin\">Admin</option>\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-gray-700\">Username</label>\r\n                    <input\r\n                        type=\"text\"\r\n                        value={username}\r\n                        onChange={(e) => setUsername(e.target.value)}\r\n                        className=\"border border-gray-300 rounded w-full p-2\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <div className=\"mb-4\">\r\n                    <label className=\"block text-gray-700\">Password</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        className=\"border border-gray-300 rounded w-full p-2\"\r\n                        required\r\n                    />\r\n                    {!isPasswordStrong(password) && <p className=\"text-red-500\">Password must be at least 6 characters long and include uppercase letters, numbers, and special characters.</p>}\r\n                </div>\r\n                <button type=\"submit\" className=\"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600\" disabled={loading}>\r\n                    {loading ? 'Registering...' : 'Register'}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}